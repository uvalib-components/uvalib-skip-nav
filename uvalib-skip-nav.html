<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../uvalib-theme/uvalib-theme.html">

<!--
`uvalib-skip-nav`
Accessibility component that becomes visible on focus and allows for jumping to the main content.

### Styling

The following custom properties are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--uvalib-skip-nav-color` | Color of skip text | white
`--uvalib-skip-nav-bkgrd-color` | Background color of skip hyperlink | red

@demo demo/index.html
-->

<dom-module id="uvalib-skip-nav">
  <template>
    <style is="custom-style" include="uvalib-theme">
      :host {
        display: block;
        --uvalib-skip-nav-color: white;
        --uvalib-skip-nav-bkgrd-color: red;
      }
      #skiptocontent a {
        padding: 5px;
        position: absolute;
        top: -40px;
        left: 0px;
        color: var(--uvalib-skip-nav-color,white);
        background-color: var(--uvalib-skip-nav-bkgrd-color,red);
        border-right: 1px solid var(--color-primary-blue);
        border-bottom: 1px solid var(--color-primary-blue);
        border-bottom-right-radius: 8px;
        z-index: 2000;
      }
      a:active,
      a:focus,
      a:hover {
        left: 0;
        top: 0;
        width: auto;
        height: auto;
        overflow: visible;
      }
      @keyframes drop-in {
        from {top: -40px;}
        to {top: 0px;}
      }
      #skiptocontent a:focus {
        animation: drop-in;
        animation-duration: 1s;
        animation-timing-function: ease-out;
        animation-delay: .5s;
        animation-iteration-count: 1;
        animation-direction: normal;
        animation-fill-mode: forwards;
        -webkit-animation: drop-in;
        -webkit-animation-duration: 1s;
        -webkit-animation-timing-function: ease-out;
        -webkit-animation-delay: .5s;
        -webkit-animation-iteration-count: 1;
        -webkit-animation-direction: normal;
        -webkit-animation-fill-mode: forwards;
      }
    </style>
    <iron-a11y-keys id="keys" target="[[_target]]" keys="enter" on-keys-pressed="jumpToContent"></iron-a11y-keys>
    <div id="skiptocontent">
      <a href$="#{{contentId}}" on-tap="jumpToContent">{{skipText}}</a>
    </div>
  </template>

  <script>
    Polymer({

      is: 'uvalib-skip-nav',

      hostAttributes: {
        tabindex: -1
      },

      properties: {

        /**
         * id attribute of the element to jump to
         */
        contentId: {
          type: String,
          value: 'content',
        },

        /**
         * skip text to display
         */
        skipText: {
          type: String,
          value: 'skip to main content'
        },

        _target: {
          type: Object,
          value: function() {
            return this.querySelector('a');
          }
        }
      },

      jumpToContent: function(e, detail) {
        this.fire('skiptocontent', {skipToContent: true});
        console.log('skiptocontent fired');
        this.$.skiptocontent.blur();
      }

    });
  </script>
</dom-module>
